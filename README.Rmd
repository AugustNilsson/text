---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# text

<!-- badges: start -->
<!-- badges: end -->

The ```text```-package uses natural language processing and machine learning methods to help you examine text variables, and their relation to numerical variables. 

## Installation

<!--You can install the released version of text from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("text")
```-->
The default method to map words to numbers in ```text``` uses BERT. BERT is a general-purpose language model that creates state-of-the-art word embeddings based on deep learning. To achieve this, ```text``` relies on ```RBERT```, which in turn is based on TensorFlow; so make sure that these packages are properly installed and working! For up-to-date instructions see [RBERT](https://github.com/johnERgordon/RBERT). 

When above packages are installed and working, you can install the development version ```text``` from [GitHub](https://github.com/), by first installing devtools and then the command bellow.

``` r
# install.packages("devtools")
devtools::install_github("oscarkjell/text")
```


## Map your text to numbers

You can easily transform text variables to BERT word embeddings: 

```{r example, eval = FALSE}
library(text)
# Get example data including both text and numerical variables
sq_data <- sq_data_tutorial8_10

# Transform the text data to BERT word embeddings
wordembeddings <- textImport(sq_data)

```

## Examine how your text relate to numerical variables 

```{r example_2, eval = TRUE, warning=TRUE, message=FALSE}
library(text)

# Load already imported word embeddings, and their corresponding numeric variables
wordembeddings <- wordembeddings1_100
numeric_data   <- sq_data_tutorial4_100


# Examine the relationship between harmony-text and Harmony in life scale (HILS) scores
model_htext_hils <- textTrain(wordembeddings$harmonytexts, numeric_data$hilstotal, nrFolds_k=10)

# Show the correlation between predicted and observed Harmony in life scale scores
model_htext_hils$Correlation

```

## Show your data by plotting statistically significant words 

```{r example_3, eval = TRUE, warning=FALSE, message=FALSE, dpi=300}
library(text)

# Example data that have been pre-processed with textPlotData function

plot <- textPlotViz(word_data = sq_data_plottingHw_HILSSSWLS_100,
      x_axes = "cohensD.x",
      y_axes = "cohensD.y",
      x_axes_label = "Harmony in life scale (Cohen's D)",
      y_axes_label = "Satisfaction with life scale (Cohen's D)")
plot

```



<!--
```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub!-->
